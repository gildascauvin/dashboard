<app-athlete-dashboard-menu [activeTab]="activeTab" [isFromUrl]="isFromUrl"></app-athlete-dashboard-menu>
<app-athlete-calendar [isFromUrl]="isFromUrl"></app-athlete-calendar>


<div class="lead-container d-flex justify-content-center">
  <div class="col-md-10 lead-body">
    <div class="lead-body-content" *ngIf="!isEmpty && false">

      <div class="workout-date mb-4" *ngFor="let _wo of flatWorkouts; first as isFirst;">

        <div class="row">
          <div [ngClass]="[isFirst ? 'col-12 title-group-datepicker' : 'col-12']">
            <div *ngIf="isFirst && hideCalendar === false" [ngClass]="[size <= responsiveSize ? '' : 'float-right']">
              <div class="input-group">
                <input class="form-control calendar" name="dp" (ngModelChange)="onDateSelected($event)" (click)="d.toggle()" [ngModel]="startedAtModel" ngbDatepicker #d="ngbDatepicker" />
                <div class="input-group-append">
                  <button class="btn btn-outline-secondary" (click)="d.toggle()" type="button"><i class="fa fa-calendar"></i></button>
                </div>
              </div>
            </div>

            <h4 class="title-date">{{ _wo.label }}</h4>
          </div>
        </div>
        <ng-container *ngIf="workouts && workouts[_wo.date]">
          <ng-container *ngFor="let workout of workouts[_wo.date]; first as isFirstDay">



            <div class="workout-session">
              <div *ngIf="workout.name" class="workout-session-title">{{ workout.name }}</div>
              <button *ngIf="checkIsToday(_wo.date) && workout.program.exercices.length > 0" [ngClass]="workout.is_session_started ? 'btn-secondary' : 'btn-primary'" class="btn start-session" (click)="openStartSessionModal(workout, workout.day)">
                {{ workout.is_session_started ? ("#Update Session" | dgTranslate) : ("#Start Session" | dgTranslate) }}
              </button>
              <ul class="list-group more-padding">
                <li class="list-group-item box-exercice" *ngFor="let exercice of workout.program.exercices;let indexExercice = index">
                  <app-athlete-movement-list [class]="'dashboard'" [exercice]="exercice" [hideLocalBox]="true"></app-athlete-movement-list>
                </li>
              </ul>

              <button *ngIf="hideCalendar" class="btn btn-block add-exercice mt-3"
                      (click)="addExerciceToWorkout(workout.day, workout.program.exercices, workout);">
                {{"#Add an exercice" | dgTranslate }}
              </button>
            </div>
          </ng-container>
        </ng-container>
      </div>
    </div>
  </div>
</div>
